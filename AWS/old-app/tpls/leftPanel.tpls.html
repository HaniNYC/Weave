<!-- Left Panel Template. 
	We can allow quite a bit of hard-coding here for our purposes.
	Dynamic content will just include display of the query object.
 -->

<div ng-controller="LeftPanelCtrl" class=" span3">

	<button onclick="saveJSON({{QueryObjectModel()}})"
		class="btn btn-primary">Save Query</button>
	<br>
	<br>
	<div class="file-upload">
		<label for="queryImport">Load Query</label> 
		<input type="file" id="queryImport" name="queryImport"
			ng-submit="uploadQuery()" file-upload />
	</div>
	<br>
	<ul class="nav nav-tabs nav-stacked">
		<li ng-class="{active: isActive('/analysis')}"><a
			href="#/analysis">Analysis Builder</a></li>
		<li ng-class="{active: isActive('/calculation')}"><a
			href="#/calculation">Calculations</a></li>
		<li ng-class="{active: isActive('/visualization')}"><a
			href="#/visualization">Visualizations</a></li>
	</ul>
	<pre class="language-">{{QueryObjectModel()}}</pre>

	<!-- <button id="run" class="btn btn-primary">Run Query</button> -->
	<br> <img id="busyIndicator" src="img/busy.gif"
		ng-show='shouldShow' />

	<script>
	var importedobjectfromjson;
		$('#run').click(function() {
			var files = $('input');
			var file = files[0].files[0];
			var reader = new FileReader();
			reader.onload = function(e) {
				importedobjectfromjson = $.parseJSON(e.target.result);
				var qh = new aws.QueryHandler(importedobjectfromjson);
				qh.runQuery();
			}
			reader.readAsText(file);
		});
	</script>
</div>